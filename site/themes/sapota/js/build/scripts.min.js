$.extend($.ui.slider.prototype,{options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,content:[function(){return $(this).attr("data-values-0")},function(){return $(this).attr("data-values-1")}],position:{left:[0,0],top:[15,15]},tooltip:!1,tooltipDisplay:!1,tooltipClass:""},_widthHalfHandle:function(){this.options;return Math.round(this.element.find(".ui-slider-handle").width()/2)},_heightHalfHandle:function(){this.options;return Math.round(this.element.find(".ui-slider-handle").height()/2)},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),d="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",e=b.values&&b.values.length||1,f=[];this.tooltip=[],this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":"")),this.range=$([]),b.range&&(b.range===!0&&(b.values||(b.values=[this._valueMin(),this._valueMin()]),b.values.length&&2!==b.values.length&&(b.values=[b.values[0],b.values[0]])),this.range=$("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:"")));for(var g=c.length;e>g;g+=1)f.push(d);this.handles=c.add($(f.join("")).appendTo(a.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){b.disabled||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).focus(function(){b.disabled?$(this).blur():($(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),$(this).addClass("ui-state-focus"))}).blur(function(){$(this).removeClass("ui-state-focus")}),this.handles.each(function(b){0==b?$(this).addClass("first-handle"):$(this).addClass("second-handle"),$(this).data("index.ui-slider-handle",b),a.options.tooltip&&a.element.attr("data-values-"+b,a.options.values[b])}),this.handles.keydown(function(b){var c,d,e,f,g=!0,h=$(this).data("index.ui-slider-handle");if(!a.options.disabled){switch(b.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(g=!1,!a._keySliding&&(a._keySliding=!0,$(this).addClass("ui-state-active"),a.options.tooltipDisplay||a._tooltipOpen(a.handles[h],h),c=a._start(b,h),c===!1))return}switch(f=a.options.step,d=e=a.options.values&&a.options.values.length?a.values(h):a.value(),b.keyCode){case $.ui.keyCode.HOME:e=a._valueMin();break;case $.ui.keyCode.END:e=a._valueMax();break;case $.ui.keyCode.PAGE_UP:e=a._trimAlignValue(d+(a._valueMax()-a._valueMin())/numPages);break;case $.ui.keyCode.PAGE_DOWN:e=a._trimAlignValue(d-(a._valueMax()-a._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(d===a._valueMax())return;e=a._trimAlignValue(d+f);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(d===a._valueMin())return;e=a._trimAlignValue(d-f)}return a._slide(b,h,e),g}}).keyup(function(b){var c=$(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(b,c),a._change(b,c),$(this).removeClass("ui-state-active"),a.options.tooltipDisplay||a._removeTooltip(a.tooltip[a._getHandleIndex($(a.handles[c]))]))}),this._refreshValue(),this._animateOff=!1,this.options.tooltipDisplay&&(this._tooltipOpen(this.handles[0],0),this._tooltipOpen(this.handles[1],1))},_refreshValue:function(){var a,b,c,d,e,f=this.options.range,g=this.options,h=this,i=this._animateOff?!1:g.animate,j={};if("horizontal"===g.orientation)var k=100*h._widthHalfHandle()/h.element.width();else var k=100*h._heightHalfHandle()/h.element.height();this.options.values&&this.options.values.length?this.handles.each(function(c,d){a=(h.values(c)-h._valueMin())/(h._valueMax()-h._valueMin())*100,0==c?a-=k:a+=k,j["horizontal"===h.orientation?"left":"bottom"]=a+"%",$(this).stop(1,1)[i?"animate":"css"](j,g.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===c&&h.range.stop(1,1)[i?"animate":"css"]({left:a+"%"},g.animate),1===c&&h.range[i?"animate":"css"]({width:a-b+"%"},{queue:!1,duration:g.animate})):(0===c&&h.range.stop(1,1)[i?"animate":"css"]({bottom:a+"%"},g.animate),1===c&&h.range[i?"animate":"css"]({height:a-b+"%"},{queue:!1,duration:g.animate}))),b=a}):(c=this.value(),d=this._valueMin(),e=this._valueMax(),a=e!==d?(c-d)/(e-d)*100:0,j["horizontal"===h.orientation?"left":"bottom"]=a+"%",this.handle.stop(1,1)[i?"animate":"css"](j,g.animate),"min"===f&&"horizontal"===this.orientation&&this.range.stop(1,1)[i?"animate":"css"]({width:a+"%"},g.animate),"max"===f&&"horizontal"===this.orientation&&this.range[i?"animate":"css"]({width:100-a+"%"},{queue:!1,duration:g.animate}),"min"===f&&"vertical"===this.orientation&&this.range.stop(1,1)[i?"animate":"css"]({height:a+"%"},g.animate),"max"===f&&"vertical"===this.orientation&&this.range[i?"animate":"css"]({height:100-a+"%"},{queue:!1,duration:g.animate}))},_slide:function(a,b,c){var d,e,f;if(this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c)),this.options.tooltip){this.element.attr("data-values-"+b,this.options.values[b]);var g=this.options.content[b].call(this.element);this.tooltip[this._getHandleIndex(this.handles[b])].length&&(this.tooltip[this._getHandleIndex(this.handles[b])].find(".ui-tooltip-content").html(g),"horizontal"==this.options.orientation?this.tooltip[this._getHandleIndex(this.handles[b])].css({left:1*$(this.handles[b]).css("left").replace("px","")+this.options.position.left[b]+"px",top:this.options.position.top[b]+"px",marginLeft:$(this.handles[b]).css("margin-left")}):this.tooltip[this._getHandleIndex(this.handles[b])].css({left:this.options.position.left[b]+"px",top:$(this.handles[b]).position().top+this.options.position.top[b]+"px",marginLeft:$(this.handles[b]).css("margin-left")}))}},_normValueFromMouse:function(a){var b,c,d,e,f,g=(this.options,this);return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),"horizontal"===this.orientation?($(".first-handle").hasClass("ui-state-active")&&(c+=g._widthHalfHandle()),$(".second-handle").hasClass("ui-state-active")&&(c-=g._widthHalfHandle())):($(".first-handle").hasClass("ui-state-active")&&(c-=g._heightHalfHandle()),$(".second-handle").hasClass("ui-state-active")&&(c+=g._heightHalfHandle())),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_mouseCapture:function(a){var b,c,d,e,f,g,h,i,j,k=this.options;return k.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b),d=this._valueMax()-this._valueMin()+1,f=this,this.handles.each(function(a){var b=Math.abs(c-f.values(a));d>b&&(d=b,e=$(this),g=a)}),k.range===!0&&this.values(1)===k.min&&(g+=1,e=$(this.handles[g])),this.values(0)==this.values(1)&&$(this.handles[1]).hasClass("ui-state-hover")&&0==g?g=1:this.values(0)==this.values(1)&&$(this.handles[0]).hasClass("ui-state-hover")&&1==g&&(g=0),e=$(this.handles[g]),h=this._start(a,g),h===!1?!1:(this._mouseSliding=!0,f._handleIndex=g,e.addClass("ui-state-active").focus(),f.options.tooltipDisplay||f._tooltipOpen(this.handles[g],g),i=e.offset(),j=!$(a.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:a.pageX-i.left-e.width()/2,top:a.pageY-i.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(a,g,c),this._animateOff=!0,!0))},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this.options.tooltipDisplay||this._removeTooltip(this.tooltip[this._getHandleIndex(this.handles[this._handleIndex])]),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_tooltipOpen:function(a,b){if(!this.options.tooltip)return"";var c="ui-tooltip-"+this._getHandleIndex(a),d=$("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));$("<div>").addClass("ui-tooltip-content").appendTo(d),d.css("display","none"),d.appendTo(this.element),d.fadeIn("fast");var e=this.options.content[b].call(this.element);d.find(".ui-tooltip-content").html(e),"horizontal"==this.options.orientation?d.css({left:1*$(a).css("left").replace("px","")+this.options.position.left[b]+"px",top:this.options.position.top[b]+"px",marginLeft:$(a).css("margin-left")}):d.css({left:this.options.position.left[b]+"px",top:$(a).position().top+this.options.position.top[b]+"px",marginLeft:$(a).css("margin-left")}),this.tooltip[this._getHandleIndex(a)]=d},_removeTooltip:function(a){$(a).length&&a.fadeOut("fast",function(){$(a).remove()})},_getHandleIndex:function(a){var b=$(".ui-slider-handle");return b.index(a)}}),function(a,b,c,d){var e=c("html"),f=c(a),g=c(b),h=c.fancybox=function(){h.open.apply(this,arguments)},i=navigator.userAgent.match(/msie/i),j=null,k=b.createTouch!==d,l=function(a){return a&&a.hasOwnProperty&&a instanceof c},m=function(a){return a&&"string"===c.type(a)},n=function(a){return m(a)&&0<a.indexOf("%")},o=function(a,b){var c=parseInt(a,10)||0;return b&&n(a)&&(c*=h.getViewport()[b]/100),Math.ceil(c)},p=function(a,b){return o(a,b)+"px"};c.extend(h,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!k,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(i?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==h.close(!0))?(c.isArray(a)||(a=l(a)?c(a).get():[a]),c.each(a,function(e,f){var g,i,j,k,n,o={};"object"===c.type(f)&&(f.nodeType&&(f=c(f)),l(f)?(o={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,o,f.metadata())):o=f),g=b.href||o.href||(m(f)?f:null),i=b.title!==d?b.title:o.title||"",k=(j=b.content||o.content)?"html":b.type||o.type,!k&&o.isDom&&(k=f.data("fancybox-type"),k||(k=(k=f.prop("class").match(/fancybox\.(\w+)/))?k[1]:null)),m(g)&&(k||(h.isImage(g)?k="image":h.isSWF(g)?k="swf":"#"===g.charAt(0)?k="inline":m(f)&&(k="html",j=f)),"ajax"===k&&(n=g.split(/\s+/,2),g=n.shift(),n=n.shift())),j||("inline"===k?g?j=c(m(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):o.isDom&&(j=f):"html"===k?j=g:!k&&!g&&o.isDom&&(k="inline",j=f)),c.extend(o,{href:g,type:k,content:j,title:i,selector:n}),a[e]=o}),h.opts=c.extend(!0,{},h.defaults,b),b.keys!==d&&(h.opts.keys=b.keys?c.extend({},h.defaults.keys,b.keys):!1),h.group=a,h._start(h.opts.index)):void 0},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.ajaxLoad=null,h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){h.cancel(),!1!==h.trigger("beforeClose")&&(h.unbindEvents(),h.isActive&&(h.isOpen&&!0!==a?(h.isOpen=h.isOpened=!1,h.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),h.wrap.stop(!0,!0).removeClass("fancybox-opened"),h.transitions[h.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),h._afterZoomOut())))},play:function(a){var b=function(){clearTimeout(h.player.timer)},c=function(){b(),h.current&&h.player.isActive&&(h.player.timer=setTimeout(h.next,h.current.playSpeed))},d=function(){b(),g.unbind(".player"),h.player.isActive=!1,h.trigger("onPlayEnd")};!0===a||!h.player.isActive&&!1!==a?h.current&&(h.current.loop||h.current.index<h.group.length-1)&&(h.player.isActive=!0,g.bind({"onCancel.player beforeClose.player":d,"onUpdate.player":c,"beforeLoad.player":b}),c(),h.trigger("onPlayStart")):d()},next:function(a){var b=h.current;b&&(m(a)||(a=b.direction.next),h.jumpto(b.index+1,a,"next"))},prev:function(a){var b=h.current;b&&(m(a)||(a=b.direction.prev),h.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=h.current;e&&(a=o(a),h.direction=b||e.direction[a>=e.index?"next":"prev"],h.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d&&(h.cancel(),h._start(a)))},reposition:function(a,b){var d,e=h.current,f=e?e.wrap:null;f&&(d=h._getPosition(b),a&&"scroll"===a.type?(delete d.position,f.stop(!0,!0).animate(d,200)):(f.css(d),e.pos=c.extend({},e.dim,d)))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(j),j=null),h.isOpen&&!j&&(j=setTimeout(function(){var d=h.current;d&&!h.isClosing&&(h.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&h._setDimension(),"scroll"===b&&d.canShrink||h.reposition(a),h.trigger("onUpdate"),j=null)},c&&!k?0:300))},toggle:function(a){h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,k&&(h.wrap.removeAttr("style").addClass("fancybox-tmp"),h.trigger("onUpdate")),h.update())},hideLoading:function(){g.unbind(".loading"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"><div></div></div>').click(h.cancel).appendTo("body"),g.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),h.cancel())}),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=h.current&&h.current.locked||!1,c={x:f.scrollLeft(),y:f.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=k&&a.innerWidth?a.innerWidth:f.width(),c.h=k&&a.innerHeight?a.innerHeight:f.height()),c},unbindEvents:function(){h.wrap&&l(h.wrap)&&h.wrap.unbind(".fb"),g.unbind(".fb"),f.unbind(".fb")},bindEvents:function(){var a,b=h.current;b&&(f.bind("orientationchange.fb"+(k?"":" resize.fb")+(b.autoCenter&&!b.locked?" scroll.fb":""),h.update),(a=b.keys)&&g.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:void(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&(!g||!g.type&&!c(g).is("[contenteditable]"))&&c.each(a,function(a,g){return 1<b.group.length&&g[f]!==d?(h[a](g[f]),e.preventDefault(),!1):-1<c.inArray(f,g)?(h[a](),e.preventDefault(),!1):void 0}))}),c.fn.mousewheel&&b.mouseWheel&&h.wrap.bind("mousewheel.fb",function(a,d,e,f){for(var g=c(a.target||null),i=!1;g.length&&!i&&!g.is(".fancybox-skin")&&!g.is(".fancybox-wrap");)i=g[0]&&!(g[0].style.overflow&&"hidden"===g[0].style.overflow)&&(g[0].clientWidth&&g[0].scrollWidth>g[0].clientWidth||g[0].clientHeight&&g[0].scrollHeight>g[0].clientHeight),g=c(g).parent();0!==d&&!i&&1<h.group.length&&!b.canShrink&&(f>0||e>0?h.prev(f>0?"down":"left"):(0>f||0>e)&&h.next(0>f?"up":"right"),a.preventDefault())}))},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),!1===d)return!1;e.helpers&&c.each(e.helpers,function(b,d){d&&h.helpers[b]&&c.isFunction(h.helpers[b][a])&&h.helpers[b][a](c.extend(!0,{},h.helpers[b].defaults,d),e)}),g.trigger(a)}},isImage:function(a){return m(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return m(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var b,d,e={};if(a=o(a),b=h.group[a]||null,!b)return!1;if(e=c.extend(!0,{},h.opts,b),b=e.margin,d=e.padding,"number"===c.type(b)&&(e.margin=[b,b,b,b]),"number"===c.type(d)&&(e.padding=[d,d,d,d]),e.modal&&c.extend(!0,e,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),e.autoSize&&(e.autoWidth=e.autoHeight=!0),"auto"===e.width&&(e.autoWidth=!0),"auto"===e.height&&(e.autoHeight=!0),e.group=h.group,e.index=a,h.coming=e,!1===h.trigger("beforeLoad"))h.coming=null;else{if(d=e.type,b=e.href,!d)return h.coming=null,h.current&&h.router&&"jumpto"!==h.router?(h.current.index=a,h[h.router](h.direction)):!1;if(h.isActive=!0,("image"===d||"swf"===d)&&(e.autoHeight=e.autoWidth=!1,e.scrolling="visible"),"image"===d&&(e.aspectRatio=!0),"iframe"===d&&k&&(e.scrolling="scroll"),e.wrap=c(e.tpl.wrap).addClass("fancybox-"+(k?"mobile":"desktop")+" fancybox-type-"+d+" fancybox-tmp "+e.wrapCSS).appendTo(e.parent||"body"),c.extend(e,{skin:c(".fancybox-skin",e.wrap),outer:c(".fancybox-outer",e.wrap),inner:c(".fancybox-inner",e.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,b){e.skin.css("padding"+b,p(e.padding[a]))}),h.trigger("onReady"),"inline"===d||"html"===d){if(!e.content||!e.content.length)return h._error("content")}else if(!b)return h._error("href");"image"===d?h._loadImage():"ajax"===d?h._loadAjax():"iframe"===d?h._loadIframe():h._afterLoad()}},_error:function(a){c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:h.coming.tpl.error}),h._afterLoad()},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,h.coming.width=this.width/h.opts.pixelRatio,h.coming.height=this.height/h.opts.pixelRatio,h._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,!0!==a.complete&&h.showLoading()},_loadAjax:function(){var a=h.coming;h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,h._afterLoad())}}))},_loadIframe:function(){var a=h.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",k?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(h.showLoading(),b.one("load",function(){c(this).data("ready",1),k||c(this).bind("load.fb",h.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),h._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||h._afterLoad()},_preloadImages:function(){var a,b,c=h.group,d=h.current,e=c.length,f=d.preload?Math.min(d.preload,e-1):0;for(b=1;f>=b;b+=1)a=c[(d.index+b)%e],"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a,b,d,e,f,g=h.coming,i=h.current;if(h.hideLoading(),g&&!1!==h.isActive)if(!1===h.trigger("afterLoad",g,i))g.wrap.stop(!0).trigger("onReset").remove(),h.coming=null;else{switch(i&&(h.trigger("beforeChange",i),i.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),h.unbindEvents(),a=g.content,b=g.type,d=g.scrolling,c.extend(h,{wrap:g.wrap,skin:g.skin,outer:g.outer,inner:g.inner,current:g,previous:i}),e=g.href,b){case"inline":case"ajax":case"html":g.selector?a=c("<div>").html(a).find(g.selector):l(a)&&(a.data("fancybox-placeholder")||a.data("fancybox-placeholder",c('<div class="fancybox-placeholder"></div>').insertAfter(a).hide()),a=a.show().detach(),g.wrap.bind("onReset",function(){c(this).find(a).length&&a.hide().replaceAll(a.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":a=g.tpl.image.replace("{href}",e);break;case"swf":a='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+e+'"></param>',f="",c.each(g.swf,function(b,c){a+='<param name="'+b+'" value="'+c+'"></param>',f+=" "+b+'="'+c+'"'}),a+='<embed src="'+e+'" type="application/x-shockwave-flash" width="100%" height="100%"'+f+"></embed></object>"}(!l(a)||!a.parent().is(g.inner))&&g.inner.append(a),h.trigger("beforeShow"),g.inner.css("overflow","yes"===d?"scroll":"no"===d?"hidden":d),h._setDimension(),h.reposition(),h.isOpen=!1,h.coming=null,h.bindEvents(),h.isOpened?i.prevMethod&&h.transitions[i.prevMethod]():c(".fancybox-wrap").not(g.wrap).stop(!0).trigger("onReset").remove(),h.transitions[h.isOpened?g.nextMethod:g.openMethod](),h._preloadImages()}},_setDimension:function(){var a,b,d,e,f,g,i,j,k,l=h.getViewport(),m=0,q=!1,r=!1,q=h.wrap,s=h.skin,t=h.inner,u=h.current,r=u.width,v=u.height,w=u.minWidth,x=u.minHeight,y=u.maxWidth,z=u.maxHeight,A=u.scrolling,B=u.scrollOutside?u.scrollbarWidth:0,C=u.margin,D=o(C[1]+C[3]),E=o(C[0]+C[2]);if(q.add(s).add(t).width("auto").height("auto").removeClass("fancybox-tmp"),C=o(s.outerWidth(!0)-s.width()),a=o(s.outerHeight(!0)-s.height()),b=D+C,d=E+a,e=n(r)?(l.w-b)*o(r)/100:r,f=n(v)?(l.h-d)*o(v)/100:v,"iframe"===u.type){if(k=u.content,u.autoHeight&&1===k.data("ready"))try{k[0].contentWindow.document.location&&(t.width(e).height(9999),g=k.contents().find("body"),B&&g.css("overflow-x","hidden"),f=g.outerHeight(!0))}catch(F){}}else(u.autoWidth||u.autoHeight)&&(t.addClass("fancybox-tmp"),u.autoWidth||t.width(e),u.autoHeight||t.height(f),u.autoWidth&&(e=t.width()),u.autoHeight&&(f=t.height()),t.removeClass("fancybox-tmp"));if(r=o(e),v=o(f),j=e/f,w=o(n(w)?o(w,"w")-b:w),y=o(n(y)?o(y,"w")-b:y),x=o(n(x)?o(x,"h")-d:x),z=o(n(z)?o(z,"h")-d:z),g=y,i=z,u.fitToView&&(y=Math.min(l.w-b,y),z=Math.min(l.h-d,z)),b=l.w-D,E=l.h-E,u.aspectRatio?(r>y&&(r=y,v=o(r/j)),v>z&&(v=z,r=o(v*j)),w>r&&(r=w,v=o(r/j)),x>v&&(v=x,r=o(v*j))):(r=Math.max(w,Math.min(r,y)),u.autoHeight&&"iframe"!==u.type&&(t.width(r),v=t.height()),v=Math.max(x,Math.min(v,z))),u.fitToView)if(t.width(r).height(v),q.width(r+C),l=q.width(),D=q.height(),u.aspectRatio)for(;(l>b||D>E)&&r>w&&v>x&&!(19<m++);)v=Math.max(x,Math.min(z,v-10)),r=o(v*j),w>r&&(r=w,v=o(r/j)),r>y&&(r=y,v=o(r/j)),t.width(r).height(v),q.width(r+C),l=q.width(),D=q.height();else r=Math.max(w,Math.min(r,r-(l-b))),v=Math.max(x,Math.min(v,v-(D-E)));B&&"auto"===A&&f>v&&b>r+C+B&&(r+=B),t.width(r).height(v),q.width(r+C),l=q.width(),D=q.height(),q=(l>b||D>E)&&r>w&&v>x,r=u.aspectRatio?g>r&&i>v&&e>r&&f>v:(g>r||i>v)&&(e>r||f>v),c.extend(u,{dim:{width:p(l),height:p(D)},origWidth:e,origHeight:f,canShrink:q,canExpand:r,wPadding:C,hPadding:a,wrapSpace:D-s.outerHeight(!0),skinSpace:s.height()-v}),!k&&u.autoHeight&&v>x&&z>v&&!r&&t.height("auto")},_getPosition:function(a){var b=h.current,c=h.getViewport(),d=b.margin,e=h.wrap.width()+d[1]+d[3],f=h.wrap.height()+d[0]+d[2],d={position:"absolute",top:d[0],left:d[3]};return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?d.position="fixed":b.locked||(d.top+=c.y,d.left+=c.x),d.top=p(Math.max(d.top,d.top+(c.h-f)*b.topRatio)),d.left=p(Math.max(d.left,d.left+(c.w-e)*b.leftRatio)),d},_afterZoomIn:function(){var a=h.current;a&&(h.isOpen=h.isOpened=!0,h.wrap.css("overflow","visible").addClass("fancybox-opened"),h.update(),(a.closeClick||a.nextClick&&1<h.group.length)&&h.inner.css("cursor","pointer").bind("click.fb",function(b){!c(b.target).is("a")&&!c(b.target).parent().is("a")&&(b.preventDefault(),h[a.closeClick?"close":"next"]())}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(h.skin).bind("click.fb",function(a){a.preventDefault(),h.close()}),a.arrows&&1<h.group.length&&((a.loop||0<a.index)&&c(a.tpl.prev).appendTo(h.outer).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(a.tpl.next).appendTo(h.outer).bind("click.fb",h.next)),h.trigger("afterShow"),a.loop||a.index!==a.group.length-1?h.opts.autoPlay&&!h.player.isActive&&(h.opts.autoPlay=!1,h.play()):h.play(!1))},_afterZoomOut:function(a){a=a||h.current,c(".fancybox-wrap").trigger("onReset").remove(),c.extend(h,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),h.trigger("afterClose",a)}}),h.transitions={getOrigPosition:function(){var a=h.current,b=a.element,c=a.orig,d={},e=50,f=50,g=a.hPadding,i=a.wPadding,j=h.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),l(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=j.y+(j.h-f)*a.topRatio,d.left=j.x+(j.w-e)*a.leftRatio),("fixed"===h.wrap.css("position")||a.locked)&&(d.top-=j.y,d.left-=j.x),d={top:p(d.top-g*a.topRatio),left:p(d.left-i*a.leftRatio),width:p(e+i),height:p(f+g)}},step:function(a,b){var c,d,e=b.prop;d=h.current;var f=d.wrapSpace,g=d.skinSpace;("width"===e||"height"===e)&&(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),h.isClosing&&(c=1-c),d="width"===e?d.wPadding:d.hPadding,d=a-d,h.skin[e](o("width"===e?d:d-f*c)),h.inner[e](o("width"===e?d:d-f*c-g*c)))},zoomIn:function(){var a=h.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),h.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:h._afterZoomIn})},zoomOut:function(){var a=h.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),h.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:h._afterZoomOut})},changeIn:function(){var a,b=h.current,c=b.nextEffect,d=b.pos,e={opacity:1},f=h.direction;d.opacity=.1,"elastic"===c&&(a="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(d[a]=p(o(d[a])-200),e[a]="+=200px"):(d[a]=p(o(d[a])+200),e[a]="-=200px")),"none"===c?h._afterZoomIn():h.wrap.css(d).animate(e,{duration:b.nextSpeed,easing:b.nextEasing,complete:h._afterZoomIn})},changeOut:function(){var a=h.previous,b=a.prevEffect,d={opacity:.1},e=h.direction;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"=200px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},h.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!k,fixed:!0},overlay:null,fixed:!1,el:c("html"),create:function(a){a=c.extend({},this.defaults,a),this.overlay&&this.close(),this.overlay=c('<div class="fancybox-overlay"></div>').appendTo(h.coming?h.coming.parent:a.parent),this.fixed=!1,a.fixed&&h.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var b=this;a=c.extend({},this.defaults,a),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a),this.fixed||(f.bind("resize.overlay",c.proxy(this.update,this)),this.update()),a.closeClick&&this.overlay.bind("click.overlay",function(a){return c(a.target).hasClass("fancybox-overlay")?(h.isActive?h.close():b.close(),!1):void 0}),this.overlay.css(a.css).show()},close:function(){var a,b;f.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(c(".fancybox-margin").removeClass("fancybox-margin"),a=f.scrollTop(),b=f.scrollLeft(),this.el.removeClass("fancybox-lock"),f.scrollTop(a).scrollLeft(b)),c(".fancybox-overlay").remove().hide(),c.extend(this,{overlay:null,fixed:!1})},update:function(){var a,c="100%";this.overlay.width(c).height("100%"),i?(a=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),g.width()>a&&(c=g.width())):g.width()>f.width()&&(c=g.width()),this.overlay.width(c).height(g.height())},onReady:function(a,b){var d=this.overlay;c(".fancybox-overlay").stop(!0,!0),d||this.create(a),a.locked&&this.fixed&&b.fixed&&(d||(this.margin=g.height()>f.height()?c("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1),!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d,e;b.locked&&(!1!==this.margin&&(c("*").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&!c(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),d=f.scrollTop(),e=f.scrollLeft(),this.el.addClass("fancybox-lock"),f.scrollTop(d).scrollLeft(e)),this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!h.coming&&this.overlay.fadeOut(a.speedOut,c.proxy(this.close,this))}},h.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var b=h.current,d=b.title,e=a.type;if(c.isFunction(d)&&(d=d.call(b.element,b)),m(d)&&""!==c.trim(d)){switch(b=c('<div class="fancybox-title fancybox-title-'+e+'-wrap">'+d+"</div>"),e){case"inside":e=h.skin;break;case"outside":e=h.wrap;break;case"over":e=h.inner;break;default:e=h.skin,b.appendTo("body"),i&&b.width(b.width()),b.wrapInner('<span class="child"></span>'),h.current.margin[2]+=Math.abs(o(b.css("margin-bottom")))}b["top"===a.position?"prependTo":"appendTo"](e)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",f=function(f){var g,i,j=c(this).blur(),k=b;!f.ctrlKey&&!f.altKey&&!f.shiftKey&&!f.metaKey&&!j.is(".fancybox-wrap")&&(g=a.groupAttr||"data-fancybox-group",i=j.attr(g),i||(g="rel",i=j.get(0)[g]),i&&""!==i&&"nofollow"!==i&&(j=e.length?c(e):d,j=j.filter("["+g+'="'+i+'"]'),k=j.index(this)),a.index=k,!1!==h.open(j,a)&&f.preventDefault())};return a=a||{},b=a.index||0,e&&!1!==a.live?g.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",f):d.unbind("click.fb-start").bind("click.fb-start",f),this.filter("[data-fancybox-start=1]").trigger("click"),this},g.ready(function(){
var b,f;if(c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();return a.remove(),b}),c.support.fixedPosition===d){b=c.support,f=c('<div style="position:fixed;top:20px;"></div>').appendTo("body");var g=20===f[0].offsetTop||15===f[0].offsetTop;f.remove(),b.fixedPosition=g}c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),b=c(a).width(),e.addClass("fancybox-lock-test"),f=c(a).width(),e.removeClass("fancybox-lock-test"),c("<style type='text/css'>.fancybox-margin{margin-right:"+(f-b)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(a){a.fn.extend({fixedTblHdrLftCol:function(b){function c(a){var b=B;return b||(b=a.outerWidth(!0)-k(a)),b}function d(a){var b=C;return b||(b=a.outerHeight(!0)-i(a)),b}function e(a){return a.find("thead tr").length}function f(b){for(var c=a([]),d=0;d<e(b);d++){for(var f=a([]),g=0;g<A.scroll.leftCol.fixedSpan;g++)f.push(b.find("thead tr:nth-child("+(d+1)+") th:nth-child("+(g+1)+")"));c.push(f)}return c}function g(b){for(var c=a([]),d=0;d<e(b);d++)c.push(b.find("thead tr:nth-child("+(d+1)+") th:first-child"));return c}function h(a,b){return a.find("thead tr:nth-child("+(b+1)+") th")}function i(b){var c=E;if(!c){var d=g(b);d.each(function(){c+=a(this).outerHeight(!0)}),E=c}return c}function j(b){for(var c=a([]),d=0;d<A.scroll.leftCol.fixedSpan;d++)c.push(b.find("tbody tr:first-child td:nth-child("+(d+1)+")"));return c}function k(b){var c=D;if(!c){var d=j(b);d.each(function(){c+=a(this).outerWidth(!0)}),D=c}return c}function l(b){var c=0;return b.find("tbody tr:first-child td").each(function(){c+=a(this).outerWidth(!0)}),c}function m(b){b.wrap(a(document.createElement("div")).attr("id",A.wrapper.outer.idName).addClass(A.wrapper.outer.className).css("width",c(b)).css("height",d(b)).css("position","relative").css("padding-left",k(b)+"px").css("padding-top",i(b)+"px").css("overflow","hidden"))}function n(b){b.wrap(a(document.createElement("div")).attr("id",A.wrapper.inner.idName).addClass(A.wrapper.inner.className).css("overflow-x",A.scroll.headRow.overflow).css("overflow-y",A.scroll.leftCol.overflow).css("width",c(b)).css("height",d(b)))}function o(a){var b=k(a),c=l(a);a.css("border-collapse","collapse").css("width",c-b+"px")}function p(b){var c=g(b),d=0;c.each(function(c){var e=h(b,c),f=0;e.each(function(b){var c=a(this).outerWidth(!0),e=a(this).outerHeight(!0);f+=c,0==b&&(d+=e),a(this).addClass(A.scroll.headRow.className).css("position","absolute").css("top",d-e+"px").css("left",f-c+"px")})})}function q(b){var c=k(b),d=l(b);b.find("tbody tr").each(function(){a(this).css("width",d-c+"px")})}function r(b){var c=0,d=j(b);d.each(function(d){var e=a(this).outerWidth(!0);c+=e,b.find("tbody tr td:nth-child("+(d+1)+")").addClass(A.scroll.leftCol.className).css("position","absolute").css("left",c-e+"px")})}function s(b){b.find("tbody tr").each(function(){for(var b=0,c=0;c<A.scroll.leftCol.fixedSpan;c++){var d=a(this).find("td:nth-child("+(c+1)+")").height();d>b&&(b=d)}a(this).find("td:nth-child("+(A.scroll.leftCol.fixedSpan+1)+")").height(b),a(this).hide().fadeIn(0)})}function t(b){var c=a("<div></div>").attr("id",A.corner.outer.idName).addClass(A.corner.outer.className).css("position","absolute").css("left","0px").css("top","0px").css("margin","0").css("padding","0").css("width",k(b)+"px").css("height",i(b)+"px"),d=a("<table></table>").attr("id",A.corner.inner.idName).addClass(A.corner.inner.className).css("border-collapse","collapse"),e=a("<thead></thead>"),g=f(b);g.each(function(){var b=a("<tr></tr>");a(this).each(function(){var c=a(this).clone(A.corner.deepClone);a(this).removeAttr("id"),a(this).unbind(),c.appendTo(b)}),b.appendTo(e)}),e.appendTo(d),d.appendTo(c),c.appendTo(b.parent())}function u(b){var c=[];b.find("tbody tr:first").each(function(){a(this).find("td").each(function(){var b=a(this).position();c.push(b.left)})}),b.find("thead tr").each(function(){a(this).find("th").each(function(b){a(this).css("left",c[b]+"px")})})}function v(a){r(a),q(a),p(a),o(a),m(a),n(a),s(a),A.corner.append&&t(a),u(a)}function w(b){b.find("tbody tr").each(function(){for(var b=0;b<A.scroll.leftCol.fixedSpan;b++)a(this).find("td:nth-child("+(b+1)+")").css("top",a(this).find("td:nth-child("+(A.scroll.leftCol.fixedSpan+1)+")").position().top+"px")})}function x(b){b.find("thead tr").each(function(c){c<e(b)&&a(this).find("th").each(function(c){a(this).css("left",b.find("tbody tr:first-child td:nth-child("+(c+1)+")").position().left+"px")})})}function y(a,b){b.scrollTop(a.scrollTop()),b.scrollLeft(a.scrollLeft())}function z(b){var c=A.scroll.syncWith;a.isArray(c)?a.each(c,function(){y(b,a(this.toString()).parent())}):y(b,a(c).parent())}var A=a.extend(!0,{scroll:{height:null,width:null,headRow:{className:"fTHLC-head-row",enabled:!0,overflow:"auto"},leftCol:{className:"fTHLC-left-col",enabled:!0,overflow:"auto",fixedSpan:1},syncWith:null},wrapper:{outer:{idName:null,className:"fTHLC-outer-wrapper"},inner:{idName:null,className:"fTHLC-inner-wrapper"}},corner:{append:!0,deepClone:!1,outer:{idName:null,className:"fTHLC-outer-corner"},inner:{idName:null,className:"fTHLC-inner-corner"}}},b),B=A.scroll.width,C=A.scroll.height,D=null,E=null;return this.each(function(){return"table"!=a(this)[0].tagName.toLowerCase()?!0:(v(a(this)),void((A.scroll.leftCol.enabled||A.scroll.headRow.enabled)&&a(this).parent().scroll(function(){A.scroll.headRow.enabled&&x(a(this)),A.scroll.leftCol.enabled&&w(a(this)),A.scroll.syncWith&&z(a(this))})))})}})}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";function b(b,c){this.element=b,this.options=a.extend({},e,c),this.init()}function c(b){if(!a(b.target).parents().hasClass("jq-selectbox")&&"OPTION"!=b.target.nodeName&&a("div.jq-selectbox.opened").length){var c=a("div.jq-selectbox.opened"),e=a("div.jq-selectbox__search input",c),f=a("div.jq-selectbox__dropdown",c),g=c.find("select").data("_"+d).options;g.onSelectClosed.call(c),e.length&&e.val("").keyup(),f.hide().find("li.sel").addClass("selected"),c.removeClass("focused opened dropup dropdown")}}var d="styler",e={wrapper:"form",idSuffix:"-styler",filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",selectPlaceholder:"Выберите...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0,onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};b.prototype={init:function(){function b(){var a="",b="",c="",f="";void 0!==d.attr("id")&&""!==d.attr("id")&&(a=' id="'+d.attr("id")+e.idSuffix+'"'),void 0!==d.attr("title")&&""!==d.attr("title")&&(b=' title="'+d.attr("title")+'"'),void 0!==d.attr("class")&&""!==d.attr("class")&&(c=" "+d.attr("class"));var g=d.data();for(var h in g)""!==g[h]&&(f+=" data-"+h+'="'+g[h]+'"');a+=f,this.id=a,this.title=b,this.classes=c}var d=a(this.element),e=this.options,f=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?!0:!1,g=navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?!0:!1;if(d.is(":checkbox")){var h=function(){var c=new b,e=a("<div"+c.id+' class="jq-checkbox'+c.classes+'"'+c.title+'><div class="jq-checkbox__div"></div></div>');d.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(e).prependTo(e),e.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"}),d.is(":checked")&&e.addClass("checked"),d.is(":disabled")&&e.addClass("disabled"),e.on("click.styler",function(){return e.is(".disabled")?!1:(d.is(":checked")?(d.prop("checked",!1),e.removeClass("checked")):(d.prop("checked",!0),e.addClass("checked")),d.change(),!1)}),d.closest("label").add('label[for="'+d.attr("id")+'"]').on("click.styler",function(b){a(b.target).is("a")||(e.click(),b.preventDefault())}),d.on("change.styler",function(){d.is(":checked")?e.addClass("checked"):e.removeClass("checked")}).on("keydown.styler",function(a){32==a.which&&e.click()}).on("focus.styler",function(){e.is(".disabled")||e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")})};h(),d.on("refresh",function(){d.off(".styler").parent().before(d).remove(),h()})}else if(d.is(":radio")){var i=function(){var c=new b,f=a("<div"+c.id+' class="jq-radio'+c.classes+'"'+c.title+'><div class="jq-radio__div"></div></div>');d.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(f).prependTo(f),f.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"}),d.is(":checked")&&f.addClass("checked"),d.is(":disabled")&&f.addClass("disabled"),f.on("click.styler",function(){return f.is(".disabled")?!1:(f.closest(e.wrapper).find('input[name="'+d.attr("name")+'"]').prop("checked",!1).parent().removeClass("checked"),d.prop("checked",!0).parent().addClass("checked"),d.change(),!1)}),d.closest("label").add('label[for="'+d.attr("id")+'"]').on("click.styler",function(b){a(b.target).is("a")||(f.click(),b.preventDefault())}),d.on("change.styler",function(){d.parent().addClass("checked")}).on("focus.styler",function(){f.is(".disabled")||f.addClass("focused")}).on("blur.styler",function(){f.removeClass("focused")})};i(),d.on("refresh",function(){d.off(".styler").parent().before(d).remove(),i()})}else if(d.is(":file")){d.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",opacity:0,margin:0,padding:0});var j=function(){var c=new b,f=d.data("placeholder");void 0===f&&(f=e.filePlaceholder);var g=d.data("browse");(void 0===g||""===g)&&(g=e.fileBrowse);var h=a("<div"+c.id+' class="jq-file'+c.classes+'"'+c.title+' style="display: inline-block; position: relative; overflow: hidden"></div>'),i=a('<div class="jq-file__name">'+f+"</div>").appendTo(h);a('<div class="jq-file__browse">'+g+"</div>").appendTo(h),d.after(h),h.append(d),d.is(":disabled")&&h.addClass("disabled"),d.on("change.styler",function(){var a=d.val();if(d.is("[multiple]")){a="";for(var b=d[0].files,c=0;c<b.length;c++)a+=(c>0?", ":"")+b[c].name}i.text(a.replace(/.+[\\\/]/,"")),""===a?(i.text(f),h.removeClass("changed")):h.addClass("changed")}).on("focus.styler",function(){h.addClass("focused")}).on("blur.styler",function(){h.removeClass("focused")}).on("click.styler",function(){h.removeClass("focused")})};j(),d.on("refresh",function(){d.off(".styler").parent().before(d).remove(),j()})}else if(d.is("select")){var k=function(){function h(b){b.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(b){var c=null;"mousewheel"==b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"==b.type&&(c=40*b.originalEvent.detail),c&&(b.stopPropagation(),b.preventDefault(),a(this).scrollTop(c+a(this).scrollTop()))})}function i(){for(var a=0;a<l.length;a++){var b=l.eq(a),c="",d="",f="",g="",h="",i="",j="",k="",n="",o="disabled",p="selected sel disabled";b.prop("selected")&&(d="selected sel"),b.is(":disabled")&&(d=o),b.is(":selected:disabled")&&(d=p),void 0!==b.attr("id")&&""!==b.attr("id")&&(g=' id="'+b.attr("id")+e.idSuffix+'"'),void 0!==b.attr("title")&&""!==l.attr("title")&&(h=' title="'+b.attr("title")+'"'),void 0!==b.attr("class")&&(j=" "+b.attr("class"),n=' data-jqfs-class="'+b.attr("class")+'"');var q=b.data();for(var r in q)""!==q[r]&&(i+=" data-"+r+'="'+q[r]+'"');d+j!==""&&(f=' class="'+d+j+'"'),c="<li"+n+i+f+h+g+">"+b.html()+"</li>",b.parent().is("optgroup")&&(void 0!==b.parent().attr("class")&&(k=" "+b.parent().attr("class")),c="<li"+n+i+' class="'+d+j+" option"+k+'"'+h+g+">"+b.html()+"</li>",b.is(":first-child")&&(c='<li class="optgroup'+k+'">'+b.parent().attr("label")+"</li>"+c)),m+=c}}function j(){var g=new b,j="",k=d.data("placeholder"),n=d.data("search"),o=d.data("search-limit"),p=d.data("search-not-found"),q=d.data("search-placeholder"),r=d.data("z-index"),s=d.data("smart-positioning");void 0===k&&(k=e.selectPlaceholder),(void 0===n||""===n)&&(n=e.selectSearch),(void 0===o||""===o)&&(o=e.selectSearchLimit),(void 0===p||""===p)&&(p=e.selectSearchNotFound),void 0===q&&(q=e.selectSearchPlaceholder),(void 0===r||""===r)&&(r=e.singleSelectzIndex),(void 0===s||""===s)&&(s=e.selectSmartPositioning);var t=a("<div"+g.id+' class="jq-selectbox jqselect'+g.classes+'" style="display: inline-block; position: relative; z-index:'+r+'"><div class="jq-selectbox__select"'+g.title+' style="position: relative"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>');d.css({margin:0,padding:0}).after(t).prependTo(t);var u=a("div.jq-selectbox__select",t),v=a("div.jq-selectbox__select-text",t),w=l.filter(":selected");i(),n&&(j='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+q+'"></div><div class="jq-selectbox__not-found">'+p+"</div>");var x=a('<div class="jq-selectbox__dropdown" style="position: absolute">'+j+'<ul style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+m+"</ul></div>");t.append(x);var y=a("ul",x),z=a("li",x),A=a("input",x),B=a("div.jq-selectbox__not-found",x).hide();z.length<o&&A.parent().hide(),""===d.val()?v.text(k).addClass("placeholder"):v.text(w.text());var C=0,D=0;if(z.each(function(){var b=a(this);b.css({display:"inline-block"}),b.innerWidth()>C&&(C=b.innerWidth(),D=b.width()),b.css({display:""})}),v.is(".placeholder")&&v.width()>C)v.width(v.width());else{var E=t.clone().appendTo("body").width("auto"),F=E.outerWidth();E.remove(),F==t.outerWidth()&&v.width(D)}C>t.width()&&x.width(C),""===l.first().text()&&""!==d.data("placeholder")&&z.first().hide(),d.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});var G=t.outerHeight(),H=A.outerHeight(),I=y.css("max-height"),J=z.filter(".selected");J.length<1&&z.first().addClass("selected sel"),void 0===z.data("li-height")&&z.data("li-height",z.outerHeight());var K=x.css("top");if("auto"==x.css("left")&&x.css({left:0}),"auto"==x.css("top")&&x.css({top:G}),x.hide(),J.length&&(l.first().text()!=w.text()&&t.addClass("changed"),t.data("jqfs-class",J.data("jqfs-class")),t.addClass(J.data("jqfs-class"))),d.is(":disabled"))return t.addClass("disabled"),!1;u.click(function(){if(a("div.jq-selectbox").filter(".opened").length&&e.onSelectClosed.call(a("div.jq-selectbox").filter(".opened")),d.focus(),!f){var b=a(window),c=z.data("li-height"),g=t.offset().top,i=b.height()-G-(g-b.scrollTop()),j=d.data("visible-options");(void 0===j||""===j)&&(j=e.selectVisibleOptions);var k=5*c,m=c*j;j>0&&6>j&&(k=m),0===j&&(m="auto");var n=function(){x.height("auto").css({bottom:"auto",top:K});var a=function(){y.css("max-height",Math.floor((i-20-H)/c)*c)};a(),y.css("max-height",m),"none"!=I&&y.css("max-height",I),i<x.outerHeight()+20&&a()},o=function(){x.height("auto").css({top:"auto",bottom:K});var a=function(){y.css("max-height",Math.floor((g-b.scrollTop()-20-H)/c)*c)};a(),y.css("max-height",m),"none"!=I&&y.css("max-height",I),g-b.scrollTop()-20<x.outerHeight()+20&&a()};return s===!0||1===s?i>k+H+20?(n(),t.removeClass("dropup").addClass("dropdown")):(o(),t.removeClass("dropdown").addClass("dropup")):(s===!1||0===s)&&i>k+H+20&&(n(),t.removeClass("dropup").addClass("dropdown")),t.offset().left+x.outerWidth()>b.width()&&x.css({left:"auto",right:0}),a("div.jqselect").css({zIndex:r-1}).removeClass("opened"),t.css({zIndex:r}),x.is(":hidden")?(a("div.jq-selectbox__dropdown:visible").hide(),x.show(),t.addClass("opened focused"),e.onSelectOpened.call(t)):(x.hide(),t.removeClass("opened dropup dropdown"),a("div.jq-selectbox").filter(".opened").length&&e.onSelectClosed.call(t)),A.length&&(A.val("").keyup(),B.hide(),A.keyup(function(){var b=a(this).val();z.each(function(){a(this).html().match(new RegExp(".*?"+b+".*?","i"))?a(this).show():a(this).hide()}),""===l.first().text()&&""!==d.data("placeholder")&&z.first().hide(),z.filter(":visible").length<1?B.show():B.hide()})),z.filter(".selected").length&&(""===d.val()?y.scrollTop(0):(y.innerHeight()/c%2!==0&&(c/=2),y.scrollTop(y.scrollTop()+z.filter(".selected").position().top-y.innerHeight()/2+c))),h(y),!1}}),z.hover(function(){a(this).siblings().removeClass("selected")});var L=z.filter(".selected").text();z.filter(":not(.disabled):not(.optgroup)").click(function(){d.focus();var b=a(this),c=b.text();if(!b.is(".selected")){var f=b.index();f-=b.prevAll(".optgroup").length,b.addClass("selected sel").siblings().removeClass("selected sel"),l.prop("selected",!1).eq(f).prop("selected",!0),L=c,v.text(c),t.data("jqfs-class")&&t.removeClass(t.data("jqfs-class")),t.data("jqfs-class",b.data("jqfs-class")),t.addClass(b.data("jqfs-class")),d.change()}x.hide(),t.removeClass("opened dropup dropdown"),e.onSelectClosed.call(t)}),x.mouseout(function(){a("li.sel",x).addClass("selected")}),d.on("change.styler",function(){v.text(l.filter(":selected").text()).removeClass("placeholder"),z.removeClass("selected sel").not(".optgroup").eq(d[0].selectedIndex).addClass("selected sel"),l.first().text()!=z.filter(".selected").text()?t.addClass("changed"):t.removeClass("changed")}).on("focus.styler",function(){t.addClass("focused"),a("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){t.removeClass("focused")}).on("keydown.styler keyup.styler",function(a){var b=z.data("li-height");""===d.val()?v.text(k).addClass("placeholder"):v.text(l.filter(":selected").text()),z.removeClass("selected sel").not(".optgroup").eq(d[0].selectedIndex).addClass("selected sel"),(38==a.which||37==a.which||33==a.which||36==a.which)&&(""===d.val()?y.scrollTop(0):y.scrollTop(y.scrollTop()+z.filter(".selected").position().top)),(40==a.which||39==a.which||34==a.which||35==a.which)&&y.scrollTop(y.scrollTop()+z.filter(".selected").position().top-y.innerHeight()+b),13==a.which&&(a.preventDefault(),x.hide(),t.removeClass("opened dropup dropdown"),e.onSelectClosed.call(t))}).on("keydown.styler",function(a){32==a.which&&(a.preventDefault(),u.click())}),c.registered||(a(document).on("click",c),c.registered=!0)}function k(){var c=new b,e=a("<div"+c.id+' class="jq-select-multiple jqselect'+c.classes+'"'+c.title+' style="display: inline-block; position: relative"></div>');d.css({margin:0,padding:0}).after(e),i(),e.append("<ul>"+m+"</ul>");var f=a("ul",e).css({position:"relative","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}),g=a("li",e).attr("unselectable","on"),j=d.attr("size"),k=f.outerHeight(),n=g.outerHeight();void 0!==j&&j>0?f.css({height:n*j}):f.css({height:4*n}),k>e.height()&&(f.css("overflowY","scroll"),h(f),g.filter(".selected").length&&f.scrollTop(f.scrollTop()+g.filter(".selected").position().top)),d.prependTo(e).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0}),d.is(":disabled")?(e.addClass("disabled"),l.each(function(){a(this).is(":selected")&&g.eq(a(this).index()).addClass("selected")})):(g.filter(":not(.disabled):not(.optgroup)").click(function(b){d.focus();var c=a(this);if(b.ctrlKey||b.metaKey||c.addClass("selected"),b.shiftKey||c.addClass("first"),b.ctrlKey||b.metaKey||b.shiftKey||c.siblings().removeClass("selected first"),(b.ctrlKey||b.metaKey)&&(c.is(".selected")?c.removeClass("selected first"):c.addClass("selected first"),c.siblings().removeClass("first")),b.shiftKey){var e=!1,f=!1;c.siblings().removeClass("selected").siblings(".first").addClass("selected"),c.prevAll().each(function(){a(this).is(".first")&&(e=!0)}),c.nextAll().each(function(){a(this).is(".first")&&(f=!0)}),e&&c.prevAll().each(function(){return a(this).is(".selected")?!1:void a(this).not(".disabled, .optgroup").addClass("selected")}),f&&c.nextAll().each(function(){return a(this).is(".selected")?!1:void a(this).not(".disabled, .optgroup").addClass("selected")}),1==g.filter(".selected").length&&c.addClass("first")}l.prop("selected",!1),g.filter(".selected").each(function(){var b=a(this),c=b.index();b.is(".option")&&(c-=b.prevAll(".optgroup").length),l.eq(c).prop("selected",!0)}),d.change()}),l.each(function(b){a(this).data("optionIndex",b)}),d.on("change.styler",function(){g.removeClass("selected");var b=[];l.filter(":selected").each(function(){b.push(a(this).data("optionIndex"))}),g.not(".optgroup").filter(function(c){return a.inArray(c,b)>-1}).addClass("selected")}).on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}),k>e.height()&&d.on("keydown.styler",function(a){(38==a.which||37==a.which||33==a.which)&&f.scrollTop(f.scrollTop()+g.filter(".selected").position().top-n),(40==a.which||39==a.which||34==a.which)&&f.scrollTop(f.scrollTop()+g.filter(".selected:last").position().top-f.innerHeight()+2*n)}))}var l=a("option",d),m="";if(d.is("[multiple]")){if(g||f)return;k()}else j()};k(),d.on("refresh",function(){d.off(".styler").parent().before(d).remove(),k()})}else d.is(":reset")&&d.on("click",function(){setTimeout(function(){d.closest(e.wrapper).find("input, select").trigger("refresh")},1)})},destroy:function(){var b=a(this.element);b.is(":checkbox")||b.is(":radio")?(b.removeData().off(".styler").removeAttr("style").parent().before(b).remove(),b.closest("label").add('label[for="'+b.attr("id")+'"]').off(".styler")):(b.is(":file")||b.is("select"))&&b.removeData().off(".styler").removeAttr("style").parent().before(b).remove()}},a.fn[d]=function(c){var e=arguments;if(void 0===c||"object"==typeof c)return this.each(function(){a.data(this,"_"+d)||a.data(this,"_"+d,new b(this,c))}).promise().done(function(){var b=a(this[0]).data("_"+d);b&&b.options.onFormStyled.call()});if("string"==typeof c&&"_"!==c[0]&&"init"!==c){var f;return this.each(function(){var g=a.data(this,"_"+d);g instanceof b&&"function"==typeof g[c]&&(f=g[c].apply(g,Array.prototype.slice.call(e,1)))}),void 0!==f?f:this}},c.registered=!1}),function(a){a.event.special.mousewheel={setup:function(){var b=a.event.special.mousewheel.handler;a.browser.mozilla&&a(this).bind("mousemove.mousewheel",function(b){a.data(this,"mwcursorposdata",{pageX:b.pageX,pageY:b.pageY,clientX:b.clientX,clientY:b.clientY})}),this.addEventListener?this.addEventListener(a.browser.mozilla?"DOMMouseScroll":"mousewheel",b,!1):this.onmousewheel=b},teardown:function(){var b=a.event.special.mousewheel.handler;a(this).unbind("mousemove.mousewheel"),this.removeEventListener?this.removeEventListener(a.browser.mozilla?"DOMMouseScroll":"mousewheel",b,!1):this.onmousewheel=function(){},a.removeData(this,"mwcursorposdata")},handler:function(b){var c=Array.prototype.slice.call(arguments,1);b=a.event.fix(b||window.event),a.extend(b,a.data(this,"mwcursorposdata")||{});var d=0;return b.wheelDelta&&(d=b.wheelDelta/120),b.detail&&(d=-b.detail/3),b.data=b.data||{},b.type="mousewheel",c.unshift(d),c.unshift(b),a.event.handle.apply(this,c)}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(a,b){a.widget("daredevel.tree",{_attachLi:function(c,d,e){var f=d.find("ul:first");f.length?b==e||f.children("li").length<e?f.append(c):(0==e&&(e+=1),f.children("li:nth-child("+e+")").before(c)):(f=a("<ul/>"),d.append(f.append(c)))},_attachNode:function(a,c,d){if(b==c){var e=this.element;this._attachLi(a,e,d),this._initializeNode(a)}else{var e=c;this._attachLi(a,e,d),e.removeClass("leaf collapsed").addClass("expanded"),this._initializeNode(a),this._initializeNode(e)}},_buildNode:function(b){b=a.extend(!0,this.options.defaultNodeAttributes,b);var c=a("<span/>",b.span),d=a("<li/>",b.li);if(a.inArray("checkbox",this.options.components)>-1){var e=a("<input/>",b.input);d.append(e)}return d.append(c),d},_create:function(){var b=this;this.options.core=this,this.element.addClass("ui-widget ui-widget-content daredevel-tree"),this.options.checkbox&&this._createCheckbox(),this.options.collapsible&&this._createCollapsible(),this.options.dnd&&this._createDnd(),this.options.selectable&&this._createSelectable(),this.element.find("li").each(function(){b._initializeNode(a(this))}),null!=this.options.nodes&&a.each(this.options.nodes,function(a,c){b.options.core.addNode(c)})},_destroy:function(){a.Widget.prototype.destroy.call(this)},_detachNode:function(a){var b=this.options.core.parentNode(a),c=b.find("ul:first");1==c.children().length?(c.detach(),b.removeClass("collapsed expanded").addClass("leaf")):a.detach(),this.options.core._initializeNode(b)},_initializeComponents:function(){for(var a in this.options.components){var b="element.tree"+this.options.components[a]+"(options);";run=new Function("options","element",b),run(this.options,this.element)}},_initializeNode:function(a){a.children("span:last").addClass("daredevel-tree-label"),this.options.checkbox&&this._initializeCheckboxNode(a),this.options.collapsible&&this._initializeCollapsibleNode(a),this.options.dnd&&this._initializeDndNode(a),this.options.selectable&&this._initializeSelectableNode(a)},addNode:function(c,d,e){var f=this,g=this._buildNode(c);b==d||0==d.length?this._attachNode(a(g),b,e):this._attachNode(a(g),a(d),e),b!=c.children&&a.each(c.children,function(a,b){f.addNode(a,g)}),f._trigger("add",!0,g)},isRoot:function(b){b=a(b);var c=b.parentsUntil(".daredevel-tree");return 1==c.length},moveNode:function(c,d,e){this._detachNode(a(c)),b==d||0==d.length?this._attachNode(a(c),b,e):this._attachNode(a(c),a(d),e),this._trigger("move",!0,a(c))},parentNode:function(b){return a(b).parents("li:first")},removeNode:function(b){this._detachNode(a(b)),this._trigger("remove",!0,a(b))},_allDescendantChecked:function(a){return 0==a.find("li input:checkbox:not(:checked)").length},_checkAncestors:function(a){a.parentsUntil("daredevel-tree").filter("li").find("input:checkbox:first:not(:checked)").prop("checked",!0).change()},_checkDescendants:function(a){a.find("li input:checkbox:not(:checked)").prop("checked",!0).change()},_checkOthers:function(b){b.addClass("exclude"),b.parents("li").addClass("exclude"),b.find("li").addClass("exclude"),a(this.element).find("li").each(function(){a(this).hasClass("exclude")||a(this).find("input:checkbox:first:not(:checked)").prop("checked",!0).change()}),a(this.element).find("li").removeClass("exclude")},_createCheckbox:function(){var b=this;this.element.on("click","input:checkbox:not(:checked)",function(){b.uncheck(b.options.core.parentNode(a(this)))}),this.element.on("click","input:checkbox:checked",function(){b.check(b.options.core.parentNode(a(this)))}),"collapse"==this.options.onUncheck.node?this.element.on("click","input:checkbox:not(:checked)",function(){b.options.core.collapse(b.options.core.parentNode(a(this)))}):"expand"==this.options.onUncheck.node&&this.element.on("click","input:checkbox:not(:checked)",function(){b.options.core.expand(b.options.core.parentNode(a(this)))}),"collapse"==this.options.onCheck.node?this.element.on("click","input:checkbox:checked",function(){b.options.core.collapse(b.options.core.parentNode(a(this)))}):"expand"==this.options.onCheck.node&&this.element.on("click","input:checkbox:checked",function(){b.options.core.expand(b.options.core.parentNode(a(this)))})},_initializeCheckboxNode:function(a){},_uncheckAncestors:function(a){a.parentsUntil("daredevel-tree").filter("li").find("input:checkbox:first:checked").prop("checked",!1).change()},_uncheckDescendants:function(a){a.find("li input:checkbox:checked").prop("checked",!1).change()},_uncheckOthers:function(b){b.addClass("exclude"),b.parents("li").addClass("exclude"),b.find("li").addClass("exclude"),a(this.element).find("li").each(function(){a(this).hasClass("exclude")||a(this).find("input:checkbox:first:checked").prop("checked",!1).change()}),a(this.element).find("li").removeClass("exclude")},check:function(b){if(b=a(b),b.find("input:checkbox:first:not(:checked)").prop("checked",!0).change(),"check"==this.options.onCheck.others?this._checkOthers(b):"uncheck"==this.options.onCheck.others&&this._uncheckOthers(b),"check"==this.options.onCheck.descendants?this._checkDescendants(b):"uncheck"==this.options.onCheck.descendants&&this._uncheckDescendants(b),"check"==this.options.onCheck.ancestors)this._checkAncestors(b);else if("uncheck"==this.options.onCheck.ancestors)this._uncheckAncestors(b);else if("checkIfFull"==this.options.onCheck.ancestors){var c=this.options.core.isRoot(b),d=this._allDescendantChecked(this.options.core.parentNode(b));!c&&d&&this.check(this.options.core.parentNode(b))}},checkAll:function(){a(this.element).find("input:checkbox:not(:checked)").prop("checked",!0).change()},uncheck:function(b){b=a(b),b.find("input:checkbox:first:checked").prop("checked",!1).change(),"check"==this.options.onUncheck.others?this._checkOthers(b):"uncheck"==this.options.onUncheck.others&&this._uncheckOthers(b),"check"==this.options.onUncheck.descendants?this._checkDescendants(b):"uncheck"==this.options.onUncheck.descendants&&this._uncheckDescendants(b),"check"==this.options.onUncheck.ancestors?this._checkAncestors(b):"uncheck"==this.options.onUncheck.ancestors&&this._uncheckAncestors(b)},uncheckAll:function(){a(this.element).find("input:checkbox:checked").prop("checked",!1).change()},_createCollapsible:function(){var b=this;this.element.on("click","li span.daredevel-tree-anchor",function(){var c=b.options.core.parentNode(a(this));c.hasClass("collapsed")?b.expand(c):c.hasClass("expanded")&&b.collapse(c)})},_initializeCollapsibleNode:function(b){var c=this,d=b.children("span.daredevel-tree-anchor");d.length<1&&b.prepend(a("<span />",{"class":"daredevel-tree-anchor"})),b.hasClass("leaf")?c._markAsLeaf(b):b.hasClass("collapsed")?c.collapse(b,!1,!0):b.hasClass("expanded")?c.expand(b,!1,!0):b.is("li:not(:has(ul))")?c._markAsLeaf(b):c._markAsExpanded(b)},_markAsCollapsed:function(a){var b=a.children("span.daredevel-tree-anchor");b.removeClass("ui-icon "+this.options.expandUiIcon+" "+this.options.leafUiIcon),this.options.collapseUiIcon.length>0&&b.addClass("ui-icon "+this.options.collapseUiIcon),a.removeClass("leaf").removeClass("expanded").addClass("collapsed")},_markAsExpanded:function(a){var b=a.children("span.daredevel-tree-anchor");b.removeClass("ui-icon "+this.options.collapseUiIcon+" "+this.options.leafUiIcon),this.options.expandUiIcon.length>0&&b.addClass("ui-icon "+this.options.expandUiIcon),a.removeClass("leaf").removeClass("collapsed").addClass("expanded")},_markAsLeaf:function(a){var b=a.children("span.daredevel-tree-anchor");b.removeClass("ui-icon "+this.options.collapseUiIcon+" "+this.options.expandUiIcon),this.options.leafUiIcon.length>0&&b.addClass("ui-icon "+this.options.leafUiIcon),a.removeClass("collapsed").removeClass("expanded").addClass("leaf")},_unmark:function(){li.removeClass("collapsed expanded leaf")},collapse:function(c,d,e){if(c=a(c),e==b&&(e=!1),e||!c.hasClass("collapsed")&&!c.hasClass("leaf")){d==b&&(d=!0);var f=this;d?(c.children("ul").hide(this.options.collapseEffect,{},this.options.collapseDuration),setTimeout(function(){f._markAsCollapsed(c,f.options)},f.options.collapseDuration)):(c.children("ul").hide(),f._markAsCollapsed(c,f.options)),f.options.core._trigger("collapse",!0,c)}},collapseAll:function(){var b=this;a(this.element).find("li.expanded").each(function(){b.collapse(a(this))})},expand:function(c,d,e){if(c=a(c),e==b&&(e=!1),e||!c.hasClass("expanded")&&!c.hasClass("leaf")){d==b&&(d=!0);var f=this;d?(c.children("ul").show(f.options.expandEffect,{},f.options.expandDuration),setTimeout(function(){f._markAsExpanded(c,f.options)},f.options.expandDuration)):(c.children("ul").show(),f._markAsExpanded(c,f.options)),f.options.core._trigger("expand",!0,c)}},expandAll:function(){
var b=this;a(this.element).find("li.collapsed").each(function(){b.expand(a(this))})},_createDnd:function(){},_initializeDndNode:function(c){var d=this,e=a("<span/>",{"class":"prepended",html:"<br/>"}).droppable({hoverClass:"over",drop:function(c,e){var f=a(this).closest("li");if(d.options.core.isRoot(f)){var g=b;d.options.core.element}else{var g=f.parent().closest("li");if(a(e.draggable.parent("li")).find(g).length)return}var h=a(a(this).parent("li")).index()+1;d.options.core.moveNode(e.draggable.parent("li"),g,h),d._trigger("drop",c,{draggable:e.draggable,droppable:g})}});a(c).find(".daredevel-tree-label:first").after(e),a(c).find(".daredevel-tree-label:first").draggable({start:function(b,c){a(this).parent("li").find("ul, .prepended").css("visibility","hidden"),a(this).parent("li").find(".droppable-label").css("display","none")},stop:function(b,c){a(this).parent("li").find("ul").css("visibility","visible"),a(this).parent("li").find(".prepended").css("visibility",""),a(this).parent("li").find(".droppable-label").css("display","inherit")},revert:!0,revertDuration:0});var e=a("<span/>",{"class":"droppable-label",html:"<br/>"}).droppable({drop:function(b,c){var e=a(this).closest("li");a(c.draggable.parent("li")).find(e).length||(d.options.core.moveNode(c.draggable.parent("li"),e,1),d._trigger("drop",b,{draggable:c.draggable,droppable:e}))},over:function(b,c){a(this).parent("li").find(".daredevel-tree-label:first").addClass("ui-state-hover")},out:function(b,c){a(this).parent("li").find(".daredevel-tree-label:first").removeClass("ui-state-hover")}});a(c).find(".daredevel-tree-label:first").after(e)},_createSelectable:function(){var b=this,c=".daredevel-tree-label:not(."+this.options.selectUiClass+")";this.element.on("click",c,function(){b.select(a(this).parent("li"))})},_deselect:function(a){a.find("span.daredevel-tree-label:first").removeClass(this.options.selectUiClass),this._trigger("deselect",!0,a)},_destroySelectable:function(){},_initializeSelectableNode:function(a){},_select:function(a){a.find("span.daredevel-tree-label:first").addClass(this.options.selectUiClass),this._trigger("select",!0,a)},deselect:function(){var b=this;this.element.find(".daredevel-tree-label."+this.options.selectUiClass).each(function(){b._deselect(a(this).parent("li"))})},select:function(b){b=a(b),this.deselect(),this._select(b)},selected:function(){var b=this.element.find(".daredevel-tree-label."+this.options.selectUiClass);return a(b).parent()},options:{defaultNodeAttributes:{span:{html:"new node"},li:{"class":"leaf"},input:{type:"checkbox"}},nodes:null,checkbox:!0,onCheck:{ancestors:"check",descendants:"check",node:"",others:""},onUncheck:{ancestors:"",descendants:"uncheck",node:"",others:""},collapsible:!0,collapseDuration:400,collapseEffect:"blind",collapseUiIcon:"ui-icon-triangle-1-e",expandDuration:400,expandEffect:"blind",expandUiIcon:"ui-icon-triangle-1-se",leafUiIcon:"",dnd:!0,drop:function(a,b){},selectable:!0,deselect:function(a,b){},selectUiClass:"ui-state-active",select:function(a,b){}}}),a.ui.draggable.prototype._getRelativeOffset=function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0),left:a.left-(parseInt(this.helper.css("left"),10)||0)}}return{top:0,left:0}}}(jQuery);